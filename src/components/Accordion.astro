---
interface AccordionItem {
  title: string;
  content: string;
}

const { items = [] }: { items: AccordionItem[] } = Astro.props as { items: AccordionItem[] };
---

<div class="w-full">
  {items.map((item, index) => (
    <div class="border-l-2 border-[#014FE9]">
      <button 
        class="w-full flex items-center my-5 text-slate-800"
        data-index={index}
        class:list-item
      >
        <span id={`icon-${index}`} class="text-slate-800 transition-transform duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
            <path fill-rule="evenodd" d="M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z" clip-rule="evenodd" />
          </svg>
        </span>
        <span class="pl-10">{item.title}</span>
      </button>
      <div id={`content-${index}`} class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
        <div class="pb-5 text-sm text-slate-500">
          {item.content}
        </div>
      </div>
    </div>
  ))}
</div>

<script type="module">
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll("button[data-index]");

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const index = btn.getAttribute("data-index");
        const content = document.getElementById(`content-${index}`);
        const icon = document.getElementById(`icon-${index}`);

        if (!content || !icon) return;

        const downSVG = `
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
            <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        `;

        const upSVG = `
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
            <path fill-rule="evenodd" d="M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z" clip-rule="evenodd" />
          </svg>
        `;

        if (content.style.maxHeight && content.style.maxHeight !== "0px") {
          content.style.maxHeight = "0";
          icon.innerHTML = upSVG;
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
          icon.innerHTML = downSVG;
        }
      });
    });
  });
</script>
